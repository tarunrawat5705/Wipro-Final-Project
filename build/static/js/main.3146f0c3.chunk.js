(this["webpackJsonpdemo-template"]=this["webpackJsonpdemo-template"]||[]).push([[0],{66:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n(32),s=n.n(c),a=n(12),i=n(4),o=n(3),u=n(7),l=n(2),j=n(5),b=n.n(j),d=n(22),O=n(34),h=n(0),p=Object(r.createContext)(),x=function(e){var t=e.children,n=Object(r.useState)(null),c=Object(l.a)(n,2),s=c[0],a=c[1];Object(r.useEffect)((function(){var e=JSON.parse(localStorage.getItem("user"));e&&a(e)}),[]);return Object(h.jsx)(p.Provider,{value:{user:s,login:function(e){localStorage.setItem("user",JSON.stringify(e)),a(e)},logout:function(){localStorage.removeItem("user"),a(null)}},children:t})},v=function(e){var t=e.scrum,n=Object(r.useState)([]),c=Object(l.a)(n,2),s=c[0],a=c[1],j=Object(r.useState)([]),x=Object(l.a)(j,2),v=x[0],f=x[1],m=Object(r.useContext)(p).user,g=Object(i.f)();Object(r.useEffect)((function(){JSON.parse(localStorage.getItem("user"))||g.push("/login")}),[g]),Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(o.a)().mark((function e(){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("http://localhost:4000/tasks?scrumId=".concat(t.id));case 3:n=e.sent,a(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching tasks:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[t.id]),Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(o.a)().mark((function e(){var t,n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("http://localhost:4000/users");case 3:t=e.sent,n=t.data.filter((function(e){return s.some((function(t){return t.assignedTo===e.id}))})),f(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error fetching users:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();s.length>0&&e()}),[s]);var S=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t,n){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.patch("http://localhost:4000/tasks/".concat(t),{status:n,history:[].concat(Object(O.a)(s.find((function(e){return e.id===t})).history),[{status:n,date:(new Date).toISOString().split("T")[0]}])});case 3:a((function(e){return e.map((function(e){return e.id===t?Object(d.a)(Object(d.a)({},e),{},{status:n}):e}))})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error("Error updating task status:",e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsxs)("h3",{children:["Scrum Details for ",t.name]}),Object(h.jsx)("h4",{children:"Tasks"}),Object(h.jsx)("ul",{children:s.map((function(e){return Object(h.jsxs)("li",{children:[Object(h.jsxs)("strong",{children:[e.title,":"]})," ",e.description," - ",Object(h.jsx)("em",{children:e.status}),"admin"===(null===m||void 0===m?void 0:m.role)&&Object(h.jsxs)("select",{value:e.status,onChange:function(t){return S(e.id,t.target.value)},children:[Object(h.jsx)("option",{value:"To Do",children:"To Do"}),Object(h.jsx)("option",{value:"In Progress",children:"In Progress"}),Object(h.jsx)("option",{value:"Done",children:"Done"})]})]},e.id)}))}),Object(h.jsx)("h4",{children:"Users"}),Object(h.jsx)("ul",{children:v.map((function(e){return Object(h.jsxs)("li",{children:[e.name," (",e.email,")"]},e.id)}))})]})},f=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(null),a=Object(l.a)(s,2),i=a[0],j=a[1],d=Object(r.useState)(!1),O=Object(l.a)(d,2),x=O[0],f=O[1],m=Object(r.useState)([]),g=Object(l.a)(m,2),S=g[0],k=g[1],w=Object(r.useState)(""),y=Object(l.a)(w,2),C=y[0],E=y[1],D=Object(r.useState)(""),T=Object(l.a)(D,2),q=T[0],I=T[1],N=Object(r.useState)(""),P=Object(l.a)(N,2),U=P[0],J=P[1],A=Object(r.useState)("To Do"),L=Object(l.a)(A,2),B=L[0],F=L[1],G=Object(r.useState)(""),W=Object(l.a)(G,2),H=W[0],R=W[1],z=Object(r.useContext)(p).user;Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("http://localhost:4000/scrums");case 3:t=e.sent,c(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching scrums:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(u.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("http://localhost:4000/users");case 3:t=e.sent,k(t.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching users:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]);var K=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("http://localhost:4000/scrums/".concat(t));case 3:n=e.sent,j(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching scrum details:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){var n,r,s;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.a.post("http://localhost:4000/scrums",{name:C});case 4:return n=e.sent,r=n.data,e.next=8,b.a.post("http://localhost:4000/tasks",{title:q,description:U,status:B,scrumId:r.id,assignedTo:H,history:[{status:B,date:(new Date).toISOString().split("T")[0]}]});case 8:return e.sent,e.next=11,b.a.get("http://localhost:4000/scrums");case 11:s=e.sent,c(s.data),f(!1),E(""),I(""),J(""),F("To Do"),R(""),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),console.error("Error adding scrum:",e.t0);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Scrum Teams"}),"admin"===(null===z||void 0===z?void 0:z.role)&&Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:function(){return f(!x)},children:x?"Cancel":"Add New Scrum"}),x&&Object(h.jsxs)("form",{onSubmit:M,children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Scrum Name:"}),Object(h.jsx)("input",{type:"text",value:C,onChange:function(e){return E(e.target.value)},required:!0})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Task Title:"}),Object(h.jsx)("input",{type:"text",value:q,onChange:function(e){return I(e.target.value)},required:!0})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Task Description:"}),Object(h.jsx)("input",{type:"text",value:U,onChange:function(e){return J(e.target.value)},required:!0})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Task Status:"}),Object(h.jsxs)("select",{value:B,onChange:function(e){return F(e.target.value)},required:!0,children:[Object(h.jsx)("option",{value:"To Do",children:"To Do"}),Object(h.jsx)("option",{value:"In Progress",children:"In Progress"}),Object(h.jsx)("option",{value:"Done",children:"Done"})]})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Assign To:"}),Object(h.jsxs)("select",{value:H,onChange:function(e){return R(e.target.value)},required:!0,children:[Object(h.jsx)("option",{value:"",children:"Select a user"}),S.map((function(e){return Object(h.jsxs)("option",{value:e.id,children:[e.name," (",e.email,")"]},e.id)}))]})]}),Object(h.jsx)("button",{type:"submit",children:"Create Scrum"})]})]}),Object(h.jsx)("ul",{children:n.map((function(e){return Object(h.jsxs)("li",{children:[e.name,Object(h.jsx)("button",{onClick:function(){return K(e.id)},children:"Get Details"})]},e.id)}))}),i&&Object(h.jsx)(v,{scrum:i})]})},m=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),a=Object(l.a)(s,2),j=a[0],d=a[1],O=Object(i.f)(),x=Object(r.useContext)(p).login,v=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){var r,c;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.a.get("http://localhost:4000/users?email=".concat(n,"&password=").concat(j));case 4:(r=e.sent).data.length>0?(c=r.data[0],x(c),"admin"===c.role?O.push("/"):O.push("/profiles")):alert("Invalid email or password"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error logging in:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Login"}),Object(h.jsxs)("form",{onSubmit:v,children:[Object(h.jsxs)("label",{children:["Email:",Object(h.jsx)("input",{type:"email",value:n,onChange:function(e){return c(e.target.value)},required:!0})]}),Object(h.jsxs)("label",{children:["Password:",Object(h.jsx)("input",{type:"password",value:j,onChange:function(e){return d(e.target.value)},required:!0})]}),Object(h.jsx)("button",{type:"submit",children:"Login"})]}),Object(h.jsx)("button",{onClick:function(){return O.push("/signup")},children:"Sign Up"})]})},g=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)([]),a=Object(l.a)(s,2),i=a[0],j=a[1],d=Object(r.useState)(null),O=Object(l.a)(d,2),x=O[0],v=O[1],f=Object(r.useState)(!1),m=Object(l.a)(f,2),g=m[0],S=m[1],k=Object(r.useState)(""),w=Object(l.a)(k,2),y=w[0],C=w[1],E=Object(r.useState)(""),D=Object(l.a)(E,2),T=D[0],q=D[1],I=Object(r.useState)(""),N=Object(l.a)(I,2),P=N[0],U=N[1],J=Object(r.useState)("employee"),A=Object(l.a)(J,2),L=A[0],B=A[1],F=Object(r.useContext)(p).user;Object(r.useEffect)((function(){var e=function(){var e=Object(u.a)(Object(o.a)().mark((function e(){var t;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("http://localhost:4000/users");case 3:t=e.sent,"admin"===(null===F||void 0===F?void 0:F.role)?c(t.data.filter((function(e){return"admin"!==(null===e||void 0===e?void 0:e.role)}))):(v(F),G(null===F||void 0===F?void 0:F.id)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching users:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[F]);var G=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get("http://localhost:4000/tasks?assignedTo=".concat(t));case 3:n=e.sent,j(n.data),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error("Error fetching tasks:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){var n;return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.a.post("http://localhost:4000/users",{name:y,email:T,password:P,role:L});case 4:return e.next=6,b.a.get("http://localhost:4000/users");case 6:n=e.sent,c(n.data.filter((function(e){return"admin"!==(null===e||void 0===e?void 0:e.role)}))),S(!1),C(""),q(""),U(""),B("employee"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.error("Error adding user:",e.t0);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"User Profiles"}),"admin"===(null===F||void 0===F?void 0:F.role)&&Object(h.jsxs)("div",{children:[Object(h.jsx)("button",{onClick:function(){return S(!g)},children:g?"Cancel":"Add New User"}),g&&Object(h.jsxs)("form",{onSubmit:W,children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Name:"}),Object(h.jsx)("input",{type:"text",value:y,onChange:function(e){return C(e.target.value)},required:!0})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Email:"}),Object(h.jsx)("input",{type:"email",value:T,onChange:function(e){return q(e.target.value)},required:!0})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Password:"}),Object(h.jsx)("input",{type:"password",value:P,onChange:function(e){return U(e.target.value)},required:!0})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Role:"}),Object(h.jsxs)("select",{value:L,onChange:function(e){return B(e.target.value)},required:!0,children:[Object(h.jsx)("option",{value:"employee",children:"Employee"}),Object(h.jsx)("option",{value:"admin",children:"Admin"})]})]}),Object(h.jsx)("button",{type:"submit",children:"Create User"})]}),Object(h.jsx)("ul",{children:n.map((function(e){return Object(h.jsxs)("li",{children:[Object(h.jsx)("strong",{children:"Name:"})," ",null===e||void 0===e?void 0:e.name," ",Object(h.jsx)("br",{}),Object(h.jsx)("strong",{children:"Email:"})," ",null===e||void 0===e?void 0:e.email," ",Object(h.jsx)("br",{}),Object(h.jsx)("button",{onClick:function(){return t=null===e||void 0===e?void 0:e.id,v(n.find((function(e){return(null===e||void 0===e?void 0:e.id)===t}))),void G(t);var t},children:"Get History"})]},null===e||void 0===e?void 0:e.id)}))})]}),"admin"!==(null===F||void 0===F?void 0:F.role)&&Object(h.jsxs)("div",{children:[Object(h.jsxs)("h3",{children:["Tasks Worked By ",null===F||void 0===F?void 0:F.name]}),Object(h.jsx)("ul",{children:i.map((function(e){return Object(h.jsxs)("li",{children:[Object(h.jsx)("strong",{children:"Title:"})," ",e.title," ",Object(h.jsx)("br",{}),Object(h.jsx)("strong",{children:"Description:"})," ",e.description," ",Object(h.jsx)("br",{}),Object(h.jsx)("strong",{children:"Status:"})," ",e.status]},e.id)}))})]}),x&&"admin"===(null===F||void 0===F?void 0:F.role)&&Object(h.jsxs)("div",{children:[Object(h.jsxs)("h3",{children:["Tasks Worked By ",x.name]}),Object(h.jsx)("ul",{children:i.map((function(e){return Object(h.jsxs)("li",{children:[Object(h.jsx)("strong",{children:"Title:"})," ",e.title," ",Object(h.jsx)("br",{}),Object(h.jsx)("strong",{children:"Description:"})," ",e.description," ",Object(h.jsx)("br",{}),Object(h.jsx)("strong",{children:"Status:"})," ",e.status]},e.id)}))})]})]})},S=function(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(""),a=Object(l.a)(s,2),j=a[0],d=a[1],O=Object(r.useState)(""),p=Object(l.a)(O,2),x=p[0],v=p[1],f=Object(i.f)(),m=function(){var e=Object(u.a)(Object(o.a)().mark((function e(t){return Object(o.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.a.post("http://localhost:4000/users",{name:n,email:j,password:x,role:"employee"});case 4:f.push("/login"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.error("Error signing up:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"Sign Up"}),Object(h.jsxs)("form",{onSubmit:m,children:[Object(h.jsxs)("label",{children:["Name:",Object(h.jsx)("input",{type:"text",value:n,onChange:function(e){return c(e.target.value)},required:!0})]}),Object(h.jsxs)("label",{children:["Email:",Object(h.jsx)("input",{type:"email",value:j,onChange:function(e){return d(e.target.value)},required:!0})]}),Object(h.jsxs)("label",{children:["Password:",Object(h.jsx)("input",{type:"password",value:x,onChange:function(e){return v(e.target.value)},required:!0})]}),Object(h.jsx)("button",{type:"submit",children:"Sign Up"})]})]})},k=function(){var e=Object(r.useContext)(p),t=e.user,n=e.logout,c=Object(i.f)();return Object(h.jsx)("nav",{children:Object(h.jsxs)("ul",{children:[Object(h.jsx)("li",{children:Object(h.jsx)(a.b,{to:"/",children:"Dashboard"})}),t?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("li",{children:Object(h.jsx)(a.b,{to:"/profiles",children:"Profiles"})}),Object(h.jsx)("li",{children:Object(h.jsx)("button",{onClick:function(){n(),c.push("/login")},children:"Logout"})})]}):Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("li",{children:Object(h.jsx)(a.b,{to:"/login",children:"Login"})})})]})})},w=function(){return Object(h.jsx)(x,{children:Object(h.jsx)(a.a,{children:Object(h.jsxs)("div",{className:"app",children:[Object(h.jsx)(k,{}),Object(h.jsxs)(i.c,{children:[Object(h.jsx)(i.a,{path:"/",exact:!0,component:f}),Object(h.jsx)(i.a,{path:"/login",component:m}),Object(h.jsx)(i.a,{path:"/signup",component:S}),Object(h.jsx)(i.a,{path:"/profiles",component:g})]})]})})})};s.a.render(Object(h.jsx)(w,{}),document.getElementById("root"))}},[[66,1,2]]]);
//# sourceMappingURL=main.3146f0c3.chunk.js.map